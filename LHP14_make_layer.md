# キーマップを作る



QMKは様々な機能がついているのですが、私のスキル不足で全然使いこなせておりません。

初心者の説明と多めに見て頂ければ幸いです。<(_ _)>

QMKの詳しい使い方は[公式ガイド](https://docs.qmk.fm/#/ja/)などを参照してください。



### １．LEDの設定

テープLEDを使った方は下記手順が必要になります。

・LHP14フォルダ内のconfig.hファイルをメモ帳などのテキストエディタで開きます。

　　　テープLEDをお使いの方：#define RGBLED_NUM 28を#define RGBLED_NUM 6に変更

　　　YS-SK6812MINI-Eをお使いの方：#define RGBLED_NUM 28（変更なし）

### ２．レイヤー（キーマップ）の作成

**※今回、LHP14\keymapsにあるdefaultフォルダをベースに自分独自のレイヤーを作ります。**

・keymapsフォルダ内に新たにフォルダを作り、LHP14\keymaps\defaultにあるconfig.h、keymap.cをそこにコピーします。（以降、新たなフォルダの名前をMy_Mapとします）

・My_Mapにあるkeymap.cをメモ帳などのテキストエディタで開きます。

・これが今、私が使っているキーマップです（ちょっと恥ずかしいw）　９ジョブ＋RGBLEDテストの10枚のレイヤーを使っております。

・登録するジョブを増やしたいときは、#define ジョブ名 連続した数字　という決まりを守って割り当てていきます。数字が連続していないとエラーになります。

・OLEDへのジョブ表示、RGBLEDにジョブごとに色を割り当てる場合は、

        case SAM:
            oled_write_P(PSTR("SAMURAI\n"), false);
              #ifdef RGBLIGHT_ENABLE
                rgblight_sethsv(0, 255, 180);
              #endif
            break;

を参考にコードを追加して下さい。

・ジョブを追加した場合はキーマップも追加します。

・各キーへのキーコードの割り当ては[QMK公式ページキーコード表](https://docs.qmk.fm/#/keycodes)などを参考にしてください。

・LHP14は3行7列目のキーとジョイスティック押下のスイッチが繋がっています。私のマップではここにコードJS_BUTTON7を定義しており、この意味はコントローラのスティック押下となります。

・とても難しく感じると思います。QMKで検索して、どうかご自身の最適なキーマップを作ってください！！



### ３．ファームウェアのコンパイルと書き込み

・QMK MSYSを起動します。

・＄が出たら、cd qmk_firmwareと打ち込んでエンターを押します。

・make LHP14:My_Mapと打ち込んでエンターを押すとコンパイルが始まります。

・コードにエラーがなければ、C:/Users/ユーザー名/qmk_firmware/.build/にLHP14_My_Map.hexというファイルが出来ていると思います。

・QMK Toolboxを起動し、hexファイルをドラッグ＆ドロップします。

・Auto-FlashをチェックしてLHP14を繋いだらリセットを押します。



### お疲れ様でした。とても大変だったと思います。

<br>
<br>


[ ＞＞Photo](./LHP14_photo.md/) 





